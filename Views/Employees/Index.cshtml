@model IEnumerable<EBookStore.Site.Models.ViewModels.EmployeeIndexVM>

@{
    ViewBag.Title = "員工列表";

    var roles = ViewBag.RoleId as SelectList;
    var criteria = ViewBag.Criteria as EBookStore.Site.Models.ViewModels.EmployeeCriteria;
    string s_roleId = criteria.RoleId.HasValue ? criteria.RoleId.Value.ToString() : "";
}

@section cdn{
    <link href="https://cdn.bootcss.com/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css" rel="stylesheet" />
    <link href="~/vendor/datatables/dataTables.bootstrap4.min.css" rel="stylesheet">
}


<div class="text-start mb-1">
    <div style="display: flex; align-items: center; text-align: left; ">
        <h2 class="m-3" style="margin-right: 20px;">員工列表</h2>
        @*<button class="btn btn-outline-primary" type="button" onclick="location.href='@Url.Action("Create")'">Create New</button>*@
    </div>

    <section style="margin-left: 0px;" class="mb-4">
        <form method="get">
            <div class="row">
                <div class="col-md-2">
                    <input type="text" class="form-control text-start" placeholder="名字" name="name" id="s_name" value="@criteria.Name" style="margin-left: 15px; margin-right: 30px; ">                </div>

                <label for="s_roleId" style="margin-left: 25px; font-size: 17px; text-align: center; display: block;">職稱</label>


                <div class="mb-3 col-md-3">
                    @*<label for="s_roleId">職稱</label>*@
                    <select name="roleId" id="s_roleId" class="form-select form-control">
                        @foreach (var item in roles)
                        {
                            <option value="@item.Value" @(s_roleId == item.Value ? "selected" : "")>@item.Text</option>
                        }
                    </select>
                </div>


                <div class="mb-3">
                    <button class="btn btn-primary">搜尋</button>
                </div>
            </div>
        </form>
    </section>
</div>

<br />
<table id="dataTable" class="table table-striped table-hover">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.RoleName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Account)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.GenderText)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Phone)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.CreatedTime)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.RoleName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Account)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.GenderText)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Phone)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedTime)
                </td>
                @*<td>
                    @Html.ActionLink("編輯", "Edit", new { id = item.Id }) |
                    @Html.ActionLink("刪除", "Delete", new { id = item.Id })
                    @Html.ActionLink("詳細", "Details", new { id = item.Id })
                </td>*@
                <td>
                    <div class="btn-group" role="group">

                        <a href="@Url.Action("Edit", new { id = item.Id })" class="btn btn-primary">編輯</a>
                        <a href="@Url.Action("Delete", new { id = item.Id })" class="btn btn-danger">刪除</a>
                    </div>
                </td>

            </tr>
        }
    </tbody>
</table>



@section scripts{
    @Scripts.Render("~/bundles/jquery")

    <script src="~/Scripts/vendor/datatables/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/vendor/datatables/dataTables.bootstrap4.min.js"></script>

    <script>
        $(document).ready(function () {
            $("#dataTable").DataTable({
                "paging": true,
                "searching": false,
                "fixedHeader": false,
                "lengthMenu": [5, 10, 20],
                "autoWidth": true,
                "ordering": true,
                "language": {
                    "searchPlaceholder": "關鍵字搜尋",
                    "emptyTable": "無資料...",
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "lengthMenu": "每頁顯示比數 _MENU_ ",
                    "zeroRecords": "無搜尋結果",
                    "info": "第 _START_ 筆 至 第 _END_筆 / 共 _TOTAL_ 筆",
                    "infoEmpty": "尚無資料",
                    "infoFiltered": "(從 _MAX_ 筆資料過濾)",
                    "infoPostFix": "",
                    "search": "",
                    "oPaginate": {
                        "sFirst": "首頁",
                        "sPrevious": "上一頁",
                        "sNext": "下一頁",
                        "sLast": "末頁"
                    }
                }
            });
        });
    </script>
}